# プロジェクトのブランチ運用

## ブランチ構成

### 🟢 シンプルで強い構成（個人〜小規模チーム向け）

```
main        … 成果物（提出・リリース専用）
develop     … 日常開発の集約先
feature/*   … 個別作業（任意）
release/*   … 成果物“確定前”の最終調整専用
bugfix/*    … 開発中・社内試験中に見つかったバグを直す
hotfix/*    … すでに出した成果物の緊急修正
```



## 各ブランチの役割

### 🔵 main（＝成果物ブランチ）

* 目的
    * 客先提出
    * 社内レビュー提出
    * 「この時点の成果物です」と言える状態
* ルール
    * ❌ 直接コミットしない
    * ✅ develop から **「成果物として確定した時だけ」**マージ
    * ✅ タグを必ず打つ

```
v1.0.0  ← 客先提出
v1.1.0  ← 機能追加後の成果物
```
### 🟡 develop（開発の本流）

* 目的
    * 日々の開発を集約
    * 動くが、必ずしも成果物品質ではない
* ルール
    * ✅ 普段はここにマージ
    * ✅ シミュレーションOK、警告ありでも可（基準はチーム次第）
* 要約
    * 「main に入れる前の溜まり場」

### 🟠 feature/*（作業用ブランチ）

* 目的
    * 個別機能・調査・試作
* ルール
    * ✅ 作業が終わったら develop にマージ
    * ✅ 途中で捨ててもOK

```
feature/aes-keyexp
feature/bram-asymmetric
feature/hdl-optimization-test
```

### 🔵 release/ ブランチ

* 目的
    * 成果物“確定前”の最終調整専用
        * 機能追加はしない
        * 品質を整えるだけ
        * 「これが次の成果物になる」という候補
* ルール
    * ✅ 社内試験で見つかった バグ修正
    * ✅ ログ・コメント・README 修正
    * ✅ パラメータ微調整
    * ❌ 新機能追加
    * ❌ 大規模リファクタ
    * 必ず develop にも戻す（重要）

マージルール
```
develop ──→ release/v1.2
release/v1.2 ──→ main（成果物確定）
release/v1.2 ──→ develop（修正の逆流）
```

### 🟣 hotfix/ ブランチ

* 目的
    * すでに出した成果物の緊急修正
        * 客先試験
        * 出荷後
        * 社外評価中
* ルール
    * ✅ 最小限の修正
    * ✅ 影響範囲が明確なバグ
    * ❌ 設計変更
    * ❌ 仕様追加
    * main と develop の両方に戻す

いつ切る？
```
main（v1.2.0 提出済み）
   ↓
hotfix/v1.2.1
```
マージルール
```
main ──→ hotfix/v1.2.1
hotfix/v1.2.1 ──→ main（v1.2.1）
hotfix/v1.2.1 ──→ develop
```

### 🟣 bugfix/ ブランチ

* 目的
    * 開発中・社内試験中に見つかったバグを直す
    * 次の成果物に入れる前提
* ルール
    * ✅ バグ修正
    * ✅ テスト追加
    * ✅ ログ改善
    * ❌ 新機能追加
    * ❌ 仕様変更

起点
```
develop（または release）
```

代表的な流れ
開発中

```
develop → bugfix/xxx
bugfix/xxx → develop
```
社内試験中
```
release/v1.2 → bugfix/xxx
bugfix/xxx → release/v1.2
bugfix/xxx → develop
```

## 担当者視点での責任境界

| ブランチ      | 主担当    | 責任内容    |
| --------- | ------ | ------- |
| feature/* | 実装者    | 実装品質    |
| develop   | 主任/リード | 統合品質    |
| release/* | 試験責任者  | 試験合格    |
| main      | CM/主任  | 提出物の正当性 |
| hotfix/*  | 主任     | 緊急対応    |

